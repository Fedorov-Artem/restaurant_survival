# restaurant_survival
### Project scope
This project's goal is to check the which restaurants stay in business and which close. To study the question I used two datasets: one from 2021 scraped by STEFANO LEONE and published on kaggle, another dataset was scraped by me in 2023 as a part of the project, it is available in the current repository and also on kaggle. The code used to screpe the TripAdvisor website and then clean the data is in the scraping_cleaning directory of this repository. The analysis was made in two Jupyter notebooks on kaggle. The first notebook joins the datasets and calculates a number of distance features, that take time to calculate, the other notebook contains the analysis itself. Both notebooks are also available in this repository.

As part of analysis a ML model that tries to predict which restaurants are going to close has been trained and than features that increase model's performance were selected, then the most important features were visualised, including several maps.

### Data scraping and cleaning
The TripAdvisor website was scraped with Selenium package, the code is in restaurant_by_id.py file. The script uses as an input list of known restaurant IDs from the 2021 dataset and saves the raw data in a *.csv file. That raw data is later cleaned, the code that was used to clean the data is in the data_cleaning.py file. To distinguish better between restaurants, that have actually closed, but were not reported as closed on TripAdvisor, and the restaurants that were closed, an additional check was performed: restaurant site URL obtained during scraping was checked to determine whether the site is online or not. Significant part of restaurnats list their facebook page as their website, and to better understand the which restaurants continue working, some additional information including date of the last post and description were also collected from the Facebook page. The scraping script is avialable in check_websites.py, and the final cleaning in data_clean_final.py.
There are several more scraping and cleaning files in the directory. Those files were used to make a list of all restaurants from the selected countries that are available on TripAdvisor now. I desided to leave that data out of scope of the project, but leave the files in the repository, as this code is functional.

The joined dataset was produced using a Jupyter notebook - I wanted to make the process of producing a joined dataset to be publicly visible on kaggle. In the same notebook several distanse count features were calculated (like total number of restaurants that match some criteria within a certain distance from the currect restaurant).

### Subset of restaurnats with known status
Unfotunately, it turned out that while TripAdvisor makes many checks before marking a restaurnat as closed, not all the restaurants that have actually closed are reported on Tripadvisor. That was a problem for the project, so I had to create a subset of restaurants that I could be sure are open. So, I had to make a subset of restaurants with a known status

### 

I have gathered data for all the restaurants located in Northern Ireland (part of the UK), Slovakia, Bulgaria and Finland that were mentioned in the original dataset. I decided to choose four countries with the least number of hotels in the original dataset, as it would be time-consuming for me to try to get the data from all the major European countries. Info for some restaurants is no longer available, as TripAdvisor now redirects to the page with the list of all nearby restaurants; these restaurants are now closed. Almost no info is possible to get about them now, so my dataset contains very minimal information about those restaurants, just the fact that they've been removed from TripAdvisor. Other restaurants' pages are still available, but they are marked as closed, with their names having "CLOSED" at the end. It is possible to get most of the information on those restaurants, and this information is present in the new dataset. A few restaurant pages now redirect to the pages of some other restaurant, and some redirect to pages of restaurants outside the country. Those are restaurants that were reported on TripAdvisor twice (duplicates).

In this EDA, I use an already cleaned dataset that contains all the relevant information from both datasets in the same row. The few duplicates mentioned earlier have been removed from the dataset, all the other restaurants are there. The data cleaning notebook is available here.

To check which restaurants have closed and which have survived, we mostly need information from 2021. From 2023 we only need information that help us label the closed restaurants. Unfortunately, not all the restaurants that were actually closed are marked as closed on TripAdvisor. To distinguish between closed and open restaurants, we can use some additional information from 2023, like the date of the last review and information on the availability of restaurant websites.
